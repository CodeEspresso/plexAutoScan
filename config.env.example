#!/bin/bash

# Plex Auto Scan 配置文件示例

# 必需配置项
# 监控目录列表，空格分隔
# 多行格式示例（使用反斜杠续行）:
#   MOUNT_PATHS="/vol02/CloudDrive/WebDAV/电影/动画电影 \
#                 /vol02/CloudDrive/WebDAV/电影/日韩电影 \
#                 /mnt/nfs/电视剧/国产剧"
# 单行格式示例:
#   MOUNT_PATHS="/vol02/CloudDrive/WebDAV/电影/动画电影 /vol02/CloudDrive/WebDAV/电影/日韩电影"
MOUNT_PATHS="/vol02/CloudDrive/WebDAV/电影/动画电影 /vol02/CloudDrive/WebDAV/电影/日韩电影"
PLEX_URL="http://localhost:32400"  # Plex服务器URL
PLEX_TOKEN="your_plex_token_here"  # Plex访问令牌

# 可选配置项
EXCLUDE_PATHS=""  # 排除目录列表，空格分隔
DEBUG=0  # 调试模式 (0=关闭, 1=启用)

# 挂载类型配置（新增）
# 支持的挂载类型: webdav, nfs, smb, local
# 格式: /path:mount_type,/path2:mount_type2
# 如果不配置，程序会自动检测挂载类型
# 多行格式示例:
#   MOUNT_CONFIGS="/vol02/CloudDrive/WebDAV:webdav,\
#                   /mnt/nfs:nfs,\
#                   /mnt/smb:smb"
# 单行格式示例:
#   MOUNT_CONFIGS="/vol02/CloudDrive/WebDAV:webdav,/mnt/nfs:nfs,/mnt/smb:smb"
MOUNT_CONFIGS=""

# 挂载类型特定参数（新增）
# WebDAV挂载参数
WEBDAV_RETRY_COUNT=5      # WebDAV重试次数
WEBDAV_RETRY_DELAY=10     # WebDAV重试延迟（秒）
WEBDAV_TIMEOUT=30         # WebDAV超时时间（秒）

# NFS挂载参数
NFS_RETRY_COUNT=3         # NFS重试次数
NFS_RETRY_DELAY=5         # NFS重试延迟（秒）
NFS_TIMEOUT=20            # NFS超时时间（秒）

# SMB挂载参数
SMB_RETRY_COUNT=5         # SMB重试次数
SMB_RETRY_DELAY=10        # SMB重试延迟（秒）
SMB_TIMEOUT=30            # SMB超时时间（秒）

# 文件大小阈值配置 (默认值可在src/config.sh中查看)
# MIN_FILE_SIZE=209715200  # 最小文件大小阈值 (200MB)
# MIN_FILE_SIZE_MB=200     # 最小文件大小阈值 (MB)
# SKIP_LARGE_FILES=1       # 是否跳过大型文件 (1=是)
# LARGE_FILE_THRESHOLD=104857600  # 大型文件阈值 (100MB)

# SMB优化参数
# SMB_SCAN_DELAY=2         # 目录扫描间隔 (秒)
# MAX_FILES_PER_SCAN=1000  # 单次扫描最大文件数

# 性能优化参数（新增）
# 并行扫描线程数（建议：5-20，WebDAV路径建议10-15）
SMB_MAX_WORKERS=10

# WebDAV扫描延迟（秒）- 越小越快，但可能影响稳定性
# 建议值：0.01-0.1，网络稳定时可设置为0.01
WEBDAV_SCAN_DELAY=0.01

# WebDAV目录扫描并行度（建议：3-10）
WEBDAV_COLLECTOR_WORKERS=8

# 批处理大小（建议：500-2000）
BATCH_SIZE=1000

# 批处理延迟（秒）- 越小越快，但可能影响稳定性
# 建议值：0.001-0.1，Docker环境可设置为0.001
BATCH_DELAY=0.001